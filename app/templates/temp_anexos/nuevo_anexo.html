{% extends 'menu.html' %}

{% block css %}

{% endblock %}
{% block title %}Nuevo Anexo{% endblock %}

{% block content %}
<h5 class="title is-5">Nuevo Anexo</h5>
<div class="container">
    <form id="form_addDocumentos" action="{{ url_for('anexos.add_anexo') }}" method="post" enctype="multipart/form-data">
        <div class="field is-horizontal">
            <div class="field-body">
                <div class="field is-grouped">
                    <p class="control is-expanded">
                        <label for="fecha" class="label is-small">Fecha <strong style="color: red;">*</strong></label>
                        <input type="date" name="fecha" id="fecha" class="input is-small" readonly required>
                    </p>
                    <p class="control is-expanded">
                        <label for="hora" class="label is-small">Hora <strong style="color: red;">*</strong></label>
                        <input type="time" name="hora" id="hora" class="input is-small" readonly required>
                    </p>
                </div>
                <div class="field has-addons">
                    <p class="control">
                        <label for="codigo" class="label is-small">Paciente <strong style="color: red;">*</strong></label>
                        <input type="text" name="codigo" id="codigo" class="input is-small" readonly required>
                    </p>
                    <p class="control is-expanded">
                        <label for="paciente" class="label is-small" style="color: white;">.</label>
                        <input type="text" name="paciente" id="paciente" class="input is-small" readonly required>
                    </p>
                    <p class="control">
                        <label class="label is-small" style="color: white;">.</label>
                        <a class="button is-small is-primary has-tooltip-bottom js-modal-trigger" data-tooltip="Buscar Paciente" data-target="modal-BusquedaPacientesAnexos">
                            <span class="icon is-small"><i aria-hidden="true"><img src="{{ url_for('static', filename='img/icons/usuario.png') }}" alt="icon"></i></span>
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <div class="field is-horizontal">
            <div class="field-body">
                <div class="field is-grouped">
                    <p class="control">
                        <label for="tipo_documento" class="label is-small">Tipo de Documento Anexo <strong style="color: red;">*</strong></label>
                        <span class="select is-small">
                            <select name="tipo_documento" id="tipo_documento" required>
                                <option value=""></option>
                                {% for tipo in tipos %}
                                <option value="{{ tipo.ID }}">{{ tipo.nombre }}</option>
                                {% endfor %}
                            </select>
                        </span>
                    </p>
                    <p class="control is-expanded">
                        <label for="descripcion" class="label is-small">Descripci√≥n Breve <strong style="color: red;">*</strong></label>
                        <input type="text" name="descripcion" id="descripcion" class="input is-small" required>
                    </p>
                </div>
            </div>
        </div>

        <div class="field is-horizontal">
            <div class="field-body">
                <div class="field">
                    <label for="documento" class="label is-small">Cargar Documento <strong style="color: red;">* (Max. 1MB)</strong></label>
                    <div id="file-anexo" class="file is-small has-name">
                        <label class="file-label">
                            <input class="file-input" type="file" name="documento" accept="application/pdf" required />
                            <span class="file-cta">
                                <span class="file-icon">
                                    <i class="fa fa-upload"></i>
                                </span>
                                <span class="file-label"> Cargar Documento PDF </span>
                            </span>
                            <span class="file-name is-expanded"> No hay documento cargado </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="field is-grouped is-grouped-centered">
            <p class="control">
                <button type="submit" class="button is-normal is-success">
                    <span class="icon is-small"><i aria-hidden="true"><img src="{{ url_for('static', filename='img/icons/guardar.png') }}" alt="icon"></i></span>
                    <span>Guardar</span>
                </button>
            </p>
            <p class="control">
                <a id="btn_cancelar" class="button is-normal is-danger">
                    <span class="icon is-small"><i aria-hidden="true"><img src="{{ url_for('static', filename='img/icons/cancelar.png') }}" alt="icon"></i></span>
                    <span>Cancelar</span>
                </a>
            </p>
        </div>
    </form>
</div>

<!-- Modal Busqueda de Pacientes -->
<div id="modal-BusquedaPacientesAnexos" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
        <div class="box">
            <h5 class="title is-5">Busqueda de Pacientes</h5>
            <table id="tablaBusquedaPacientesAnexos" class="table is-striped is-hoverable" style="width: 100%; cursor: pointer;">
                <thead>
                    <tr>
                        <th style="width: 15%;" scope="col">Tipo Doc.</th>
                        <th style="width: 20%;" scope="col">No. Documento</th>
                        <th style="width: 70%;" scope="col">Nombre Completo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for paciente in pacientes %}
                    <tr>
                        <td style="width: 10%;">{{ paciente.tipo }}</td>
                        <td style="width: 15%;">{{ paciente.documento }}</td>
                        <td style="width: 75%;">{{ paciente.nombre }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/anexos/add_anexo.js') }}"></script>
{% endblock %}